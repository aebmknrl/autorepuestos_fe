<toast></toast>
<div class="row">
    <div class="col-md-12">
        <h2>Lista de Marcas</h2>
    </div>
</div>
<div class="row">
    <hr>
</div>
<div ng-controller="marcasController as mc" ng-cloak cg-busy="{promise:getMarcasPromise,message:'Cargando...',templateUrl:'bower_components/angular-busy/angular-busy.html'}">
    <div class="row">
        <div class="col-lg-6">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Buscar en todas las marcas..." ng-model="mc.searchText" on-enter="mc.getMarcas(QtyPagesSelected,1,mc.searchText)">
                <span class="input-group-btn">
		        <button class="btn btn-default btn-left-margin-5" type="button" ng-click="mc.getMarcas(QtyPagesSelected,1,mc.searchText)">
		        	<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                </button>
                </span>
                <span class="input-group-btn">
		        <button class="btn btn-default btn-left-margin-5" type="button" ng-class="{true:'row-visible', false: 'row-no-visible'}[mc.selectedItem.id == marca.marId]">
		        	<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                </button>
                </span>
            </div>
        </div>
        <div class="col-md-2 col-md-offset-4">
            <input type="text" class="form-control" id="txtFilter" placeholder="Filtro" ng-model="mc.filter">
        </div>
    </div>
    <div class="row">
        <hr>
    </div>
    <div class="row">
        <table class="table table-hover" ng-cloak>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Observación</th>
                    <th>Accion</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat-start="marca in mc.marcas | filter:mc.filter">
                    <td>{{marca.marId}}</td>
                    <td>{{marca.marNombre}}</td>
                    <td>{{marca.marObservacion}}</td>
                    <td>
                        <button type="button" class="btn btn-primary" ng-model="mc.selectedItem.id" uib-btn-checkbox btn-checkbox-true="marca.marId" btn-checkbox-false="0">
							<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
						</button>
                        <button type="button" class="btn btn-danger" ng-disabled="mc.selectedItem.id == marca.marId">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Eliminar
						</button>
                    </td>
                </tr>
                <tr ng-repeat-end ng-class="{true:'row-visible', false: 'row-no-visible'}[mc.selectedItem.id == marca.marId]">
                    <td>
                        <strong>Editando Marca ID: {{marca.marId}}</strong>
                    </td>
                    <td>
                        <form name="updateNameForm" novalidate>
                            <div ng-class="{ 'has-error': updateNameForm.nombre.$touched && updateNameForm.nombre.$invalid}">
                                <input type="text" name="nombre" class="form-control" ng-model="marca.marNombre" placeholder="Nombre" required/>
                                <div class="help-block" ng-messages="updateNameForm.nombre.$error" ng-if="updateNameForm.nombre.$touched">
                                    <p ng-message="required">"Nombre" es requerido.</p>
                                </div>
                            </div>
                        </form>
                    </td>
                    <td>
                        <form name="updateObsForm" novalidate>
                            <div ng-class="{ 'has-error': updateObsForm.observaciones.$touched && updateObsForm.observaciones.$invalid}">
                                <input type="text" name="observaciones" class="form-control" ng-model="marca.marObservacion" placeholder="Observaciones" required/>
                                <div class="help-block" ng-messages="updateObsForm.observaciones.$error" ng-if="updateObsForm.observaciones.$touched">
                                    <p ng-message="required">"Observación" es requerido.</p>
                                </div>
                            </div>
                        </form>
                    </td>
                    <td>
                        <button type="button" class="btn btn-success" ng-click="mc.updateMarcas(marca.marId,marca.marNombre,marca.marObservacion)">
					        <span class="glyphicon glyphicon-ok-sign" aria-hidden="true" ></span> Guardar
				        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <hr>
    </div>
    <div class="row" ng-cloak ng-show="mc.allLoad">
        <form class="form-inline">
            <div class="form-group">
                <select class="form-control in-line-paginator" id="selQtyPages" ng-model="QtyPagesSelected" ng-change="mc.ChangeQtyPagesTables(QtyPagesSelected,mc.searchText)" ng-init="QtyPagesSelected=QtyPageTables">
				    <option value=10>10</option>
				    <option value=20>20</option>
				    <option value=50>50</option>
				    <option value=100>100</option>
				    <option value=Todos>Todos</option>
				</select>
            </div>
            <div class="form-group">
                <ul uib-pagination previous-text="Anterior" next-text="Siguiente" items-per-page="QtyPageTables" total-items="mc.totalMarcas" ng-model="mc.CurrentPage" ng-change="mc.setPage(mc.CurrentPage)"></ul>
            </div>
            <div class="form-group pull-right actual-range" ng-cloak>
                {{mc.actualRange}}
            </div>
        </form>
    </div>
</div>